{"ast":null,"code":"import React,{useState,useEffect,useReducer}from'react';import{Link}from'react-router-dom';import{useAuth}from'../context/AuthContext';import{getProfile,updateProfile,getAddresses,addAddress,updateAddress,deleteAddress}from'../api/auth';import{validateRequired,validatePhone,validateZipCode}from'../utils/validators';import Button from'../components/ui/Button';import Loading from'../components/ui/Loading';import{toast}from'react-toastify';import AddressCard from'../components/ui/AddressCard';import AddressForm from'../components/ui/AddressForm';import Modal from'../components/ui/Modal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const addressInitialState={addresses:[],showAddressModal:false,editingAddress:null,addressFormErrors:{},addressProcessingId:null,isSavingAddress:false};function addressReducer(state,action){switch(action.type){case'LOAD_ADDRESSES':return{...state,addresses:action.addresses};case'OPEN_MODAL':return{...state,showAddressModal:true,editingAddress:action.editingAddress||null,addressFormErrors:{}};case'CLOSE_MODAL':return{...state,showAddressModal:false,editingAddress:null,addressFormErrors:{}};case'SET_FORM_ERRORS':return{...state,addressFormErrors:action.errors};case'SET_PROCESSING':return{...state,addressProcessingId:action.id};case'SET_SAVING':return{...state,isSavingAddress:action.value};case'ADD_ADDRESS':return{...state,addresses:[...state.addresses,action.address]};case'UPDATE_ADDRESS':return{...state,addresses:state.addresses.map(addr=>addr.id===action.address.id?action.address:addr)};case'DELETE_ADDRESS':return{...state,addresses:state.addresses.filter(addr=>addr.id!==action.id)};case'SET_DEFAULT_ADDRESS':return{...state,addresses:state.addresses.map(addr=>addr.id===action.id?{...addr,is_default:true}:{...addr,is_default:false})};default:return state;}}const Profile=()=>{const{user,updateUserInfo}=useAuth();// 프로필 상태\nconst[profileData,setProfileData]=useState({name:(user===null||user===void 0?void 0:user.name)||'',phone:(user===null||user===void 0?void 0:user.phone)||''});// 배송지 상태\nconst[addressState,addressDispatch]=useReducer(addressReducer,addressInitialState);// 로딩 상태\nconst[isProfileLoading,setIsProfileLoading]=useState(true);const[isAddressLoading,setIsAddressLoading]=useState(true);const[isSavingProfile,setIsSavingProfile]=useState(false);// 에러 상태\nconst[profileErrors,setProfileErrors]=useState({});// 프로필 정보 로드\nuseEffect(()=>{const fetchProfile=async()=>{setIsProfileLoading(true);try{const data=await getProfile();setProfileData({name:data.name||'',phone:data.phone||''});}catch(error){console.error('프로필 로드 실패:',error);toast.error('프로필 정보를 불러오는데 실패했습니다.');}finally{setIsProfileLoading(false);}};fetchProfile();},[]);// 배송지 정보 로드\nuseEffect(()=>{if(!user)return;// user가 세팅된 후에만 실행\nconst fetchAddresses=async()=>{setIsAddressLoading(true);try{const response=await getAddresses();addressDispatch({type:'LOAD_ADDRESSES',addresses:response.results||[]});}catch(error){console.error('배송지 로드 실패:',error);toast.error('배송지 정보를 불러오는데 실패했습니다.');}finally{setIsAddressLoading(false);}};fetchAddresses();},[user]);// 프로필 폼 입력 핸들러\nconst handleProfileChange=e=>{const{name,value}=e.target;setProfileData({...profileData,[name]:value});// 에러 초기화\nif(profileErrors[name]){setProfileErrors({...profileErrors,[name]:''});}};// 배송지 추가 버튼 클릭\nconst handleAddAddressClick=()=>{addressDispatch({type:'OPEN_MODAL'});};// 배송지 수정 버튼 클릭\nconst handleEditAddress=address=>{addressDispatch({type:'OPEN_MODAL',editingAddress:address});};// 배송지 삭제\nconst handleDeleteAddress=async addressId=>{if(!window.confirm('이 배송지를 삭제하시겠습니까?'))return;addressDispatch({type:'SET_PROCESSING',id:addressId+'-delete'});try{await deleteAddress(addressId);addressDispatch({type:'DELETE_ADDRESS',id:addressId});toast.success('배송지가 삭제되었습니다.');if(addressState.editingAddress&&addressState.editingAddress.id===addressId){addressDispatch({type:'CLOSE_MODAL'});}}catch(error){toast.error('배송지 삭제에 실패했습니다.');}finally{addressDispatch({type:'SET_PROCESSING',id:null});}};// 기본 배송지 설정\nconst handleSetDefaultAddress=async addressId=>{addressDispatch({type:'SET_PROCESSING',id:addressId+'-setDefault'});try{const updated=await updateAddress(addressId,{is_default:true});addressDispatch({type:'SET_DEFAULT_ADDRESS',id:addressId});toast.success('기본 배송지가 변경되었습니다.');}catch(error){toast.error('기본 배송지 설정에 실패했습니다.');}finally{addressDispatch({type:'SET_PROCESSING',id:null});}};// 배송지 추가/수정 폼 제출\nconst handleAddressFormSubmit=async form=>{addressDispatch({type:'SET_SAVING',value:true});addressDispatch({type:'SET_FORM_ERRORS',errors:{}});try{let updatedAddress;if(addressState.editingAddress){updatedAddress=await updateAddress(addressState.editingAddress.id,form);addressDispatch({type:'UPDATE_ADDRESS',address:updatedAddress});toast.success('배송지가 수정되었습니다.');}else{updatedAddress=await addAddress(form);addressDispatch({type:'ADD_ADDRESS',address:updatedAddress});toast.success('새 배송지가 추가되었습니다.');}// 기본 배송지로 설정된 경우, 목록에서 반영\nif(updatedAddress.is_default){addressDispatch({type:'SET_DEFAULT_ADDRESS',id:updatedAddress.id});}addressDispatch({type:'CLOSE_MODAL'});}catch(error){if(error.response&&error.response.data){const fieldErrors={};Object.entries(error.response.data).forEach(_ref=>{let[key,value]=_ref;fieldErrors[key]=Array.isArray(value)?value[0]:value;});addressDispatch({type:'SET_FORM_ERRORS',errors:fieldErrors});}else{toast.error('배송지 저장에 실패했습니다.');}}finally{addressDispatch({type:'SET_SAVING',value:false});}};// 배송지 추가/수정 모달 닫기\nconst handleAddressModalClose=()=>{addressDispatch({type:'CLOSE_MODAL'});};// 프로필 저장 핸들러\nconst handleSaveProfile=async e=>{e.preventDefault();// 프로필 유효성 검증\nconst errors={};if(!validateRequired(profileData.name)){errors.name='이름을 입력해주세요.';}if(profileData.phone&&!validatePhone(profileData.phone)){errors.phone='올바른 전화번호 형식이 아닙니다.';}setProfileErrors(errors);if(Object.keys(errors).length>0){return;}setIsSavingProfile(true);try{const updatedProfile=await updateProfile(profileData);updateUserInfo(updatedProfile);toast.success('프로필이 성공적으로 저장되었습니다.');}catch(error){console.error('프로필 저장 실패:',error);if(error.response&&error.response.data){// 필드별 에러 처리\nconst fieldErrors={};Object.entries(error.response.data).forEach(_ref2=>{let[key,value]=_ref2;fieldErrors[key]=Array.isArray(value)?value[0]:value;});if(Object.keys(fieldErrors).length>0){setProfileErrors(fieldErrors);}else{toast.error('프로필 저장에 실패했습니다.');}}else{toast.error('서버 연결에 문제가 있습니다.');}}finally{setIsSavingProfile(false);}};// 로딩 중일 때\nif(isProfileLoading||isAddressLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsx(Loading,{text:\"\\uD504\\uB85C\\uD544 \\uC815\\uBCF4\\uB97C \\uBD88\\uB7EC\\uC624\\uB294 \\uC911\\uC785\\uB2C8\\uB2E4...\"})});}return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-12\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-extrabold text-gray-900\",children:\"\\uB0B4 \\uC815\\uBCF4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600\",children:\"\\uACC4\\uC815 \\uC815\\uBCF4\\uB97C \\uAD00\\uB9AC\\uD569\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSaveProfile,className:\"mt-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-3xl mx-auto bg-white shadow overflow-hidden rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-5 sm:p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-6 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-6 sm:col-span-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-sm font-medium text-gray-700\",children:\"\\uC774\\uBA54\\uC77C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",id:\"email\",value:(user===null||user===void 0?void 0:user.email)||'',readOnly:true,className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-50 text-gray-500 sm:text-sm\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-xs text-gray-500\",children:\"\\uC774\\uBA54\\uC77C\\uC740 \\uBCC0\\uACBD\\uD560 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-6 sm:col-span-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",className:\"block text-sm font-medium text-gray-700\",children:\"\\uC774\\uB984\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",id:\"name\",value:profileData.name,onChange:handleProfileChange,className:`mt-1 block w-full border ${profileErrors.name?'border-red-300':'border-gray-300'} rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm`}),profileErrors.name&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-red-600\",children:profileErrors.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-6 sm:col-span-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",className:\"block text-sm font-medium text-gray-700\",children:\"\\uC804\\uD654\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"phone\",id:\"phone\",value:profileData.phone,onChange:handleProfileChange,placeholder:\"01012345678\",className:`mt-1 block w-full border ${profileErrors.phone?'border-red-300':'border-gray-300'} rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm`}),profileErrors.phone?/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-red-600\",children:profileErrors.phone}):/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-xs text-gray-500\",children:\"- \\uC5C6\\uC774 \\uC22B\\uC790\\uB9CC \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3 bg-gray-50 text-right sm:px-6\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",isLoading:isSavingProfile,children:\"\\uC800\\uC7A5\"})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-extrabold text-gray-900\",children:\"\\uBC30\\uC1A1\\uC9C0 \\uAD00\\uB9AC\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600\",children:\"\\uC8FC\\uBB38 \\uC2DC \\uC0AC\\uC6A9\\uD560 \\uBC30\\uC1A1\\uC9C0\\uB97C \\uAD00\\uB9AC\\uD569\\uB2C8\\uB2E4.\"})]}),/*#__PURE__*/_jsx(Button,{onClick:handleAddAddressClick,variant:\"primary\",children:\"\\uC0C8 \\uBC30\\uC1A1\\uC9C0 \\uCD94\\uAC00\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 space-y-6\",children:addressState.addresses.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-6 text-center rounded-lg\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"mx-auto h-12 w-12 text-gray-400\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:[/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"}),/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-base font-medium text-gray-900\",children:\"\\uB4F1\\uB85D\\uB41C \\uBC30\\uC1A1\\uC9C0\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"\\uC0C8 \\uBC30\\uC1A1\\uC9C0\\uB97C \\uCD94\\uAC00\\uD574\\uC8FC\\uC138\\uC694.\"})]}):addressState.addresses.map(address=>/*#__PURE__*/_jsx(AddressCard,{address:address,onEdit:handleEditAddress,onDelete:handleDeleteAddress,onSetDefault:handleSetDefaultAddress,isProcessing:addressState.addressProcessingId&&addressState.addressProcessingId.startsWith(address.id)?addressState.addressProcessingId.split('-')[1]:false},address.id))}),/*#__PURE__*/_jsx(Modal,{isOpen:addressState.showAddressModal,onClose:handleAddressModalClose,title:addressState.editingAddress?'배송지 수정':'새 배송지 추가',children:/*#__PURE__*/_jsx(AddressForm,{initialData:addressState.editingAddress?addressState.editingAddress:undefined,onSubmit:handleAddressFormSubmit,onCancel:handleAddressModalClose,isLoading:addressState.isSavingAddress,errors:addressState.addressFormErrors})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Link,{to:\"/orders\",children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",children:\"\\uC8FC\\uBB38 \\uB0B4\\uC5ED \\uBCF4\\uAE30\"})})})]})})});};export default Profile;","map":{"version":3,"names":["React","useState","useEffect","useReducer","Link","useAuth","getProfile","updateProfile","getAddresses","addAddress","updateAddress","deleteAddress","validateRequired","validatePhone","validateZipCode","Button","Loading","toast","AddressCard","AddressForm","Modal","jsx","_jsx","jsxs","_jsxs","addressInitialState","addresses","showAddressModal","editingAddress","addressFormErrors","addressProcessingId","isSavingAddress","addressReducer","state","action","type","errors","id","value","address","map","addr","filter","is_default","Profile","user","updateUserInfo","profileData","setProfileData","name","phone","addressState","addressDispatch","isProfileLoading","setIsProfileLoading","isAddressLoading","setIsAddressLoading","isSavingProfile","setIsSavingProfile","profileErrors","setProfileErrors","fetchProfile","data","error","console","fetchAddresses","response","results","handleProfileChange","e","target","handleAddAddressClick","handleEditAddress","handleDeleteAddress","addressId","window","confirm","success","handleSetDefaultAddress","updated","handleAddressFormSubmit","form","updatedAddress","fieldErrors","Object","entries","forEach","_ref","key","Array","isArray","handleAddressModalClose","handleSaveProfile","preventDefault","keys","length","updatedProfile","_ref2","className","children","text","onSubmit","htmlFor","email","readOnly","onChange","placeholder","variant","isLoading","onClick","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","onEdit","onDelete","onSetDefault","isProcessing","startsWith","split","isOpen","onClose","title","initialData","undefined","onCancel","to"],"sources":["C:/Users/COM-LM/Documents/ShopEase/frontend/src/pages/Profile.js"],"sourcesContent":["import React, { useState, useEffect, useReducer } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { getProfile, updateProfile, getAddresses, addAddress, updateAddress, deleteAddress } from '../api/auth';\r\nimport { validateRequired, validatePhone, validateZipCode } from '../utils/validators';\r\nimport Button from '../components/ui/Button';\r\nimport Loading from '../components/ui/Loading';\r\nimport { toast } from 'react-toastify';\r\nimport AddressCard from '../components/ui/AddressCard';\r\nimport AddressForm from '../components/ui/AddressForm';\r\nimport Modal from '../components/ui/Modal';\r\n\r\nconst addressInitialState = {\r\n  addresses: [],\r\n  showAddressModal: false,\r\n  editingAddress: null,\r\n  addressFormErrors: {},\r\n  addressProcessingId: null,\r\n  isSavingAddress: false,\r\n};\r\n\r\nfunction addressReducer(state, action) {\r\n  switch (action.type) {\r\n    case 'LOAD_ADDRESSES':\r\n      return { ...state, addresses: action.addresses };\r\n    case 'OPEN_MODAL':\r\n      return { ...state, showAddressModal: true, editingAddress: action.editingAddress || null, addressFormErrors: {} };\r\n    case 'CLOSE_MODAL':\r\n      return { ...state, showAddressModal: false, editingAddress: null, addressFormErrors: {} };\r\n    case 'SET_FORM_ERRORS':\r\n      return { ...state, addressFormErrors: action.errors };\r\n    case 'SET_PROCESSING':\r\n      return { ...state, addressProcessingId: action.id };\r\n    case 'SET_SAVING':\r\n      return { ...state, isSavingAddress: action.value };\r\n    case 'ADD_ADDRESS':\r\n      return { ...state, addresses: [...state.addresses, action.address] };\r\n    case 'UPDATE_ADDRESS':\r\n      return { ...state, addresses: state.addresses.map(addr => addr.id === action.address.id ? action.address : addr) };\r\n    case 'DELETE_ADDRESS':\r\n      return { ...state, addresses: state.addresses.filter(addr => addr.id !== action.id) };\r\n    case 'SET_DEFAULT_ADDRESS':\r\n      return {\r\n        ...state,\r\n        addresses: state.addresses.map(addr =>\r\n          addr.id === action.id ? { ...addr, is_default: true } : { ...addr, is_default: false }\r\n        ),\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst Profile = () => {\r\n  const { user, updateUserInfo } = useAuth();\r\n  \r\n  // 프로필 상태\r\n  const [profileData, setProfileData] = useState({\r\n    name: user?.name || '',\r\n    phone: user?.phone || '',\r\n  });\r\n  \r\n  // 배송지 상태\r\n  const [addressState, addressDispatch] = useReducer(addressReducer, addressInitialState);\r\n  \r\n  // 로딩 상태\r\n  const [isProfileLoading, setIsProfileLoading] = useState(true);\r\n  const [isAddressLoading, setIsAddressLoading] = useState(true);\r\n  const [isSavingProfile, setIsSavingProfile] = useState(false);\r\n  \r\n  // 에러 상태\r\n  const [profileErrors, setProfileErrors] = useState({});\r\n  \r\n  // 프로필 정보 로드\r\n  useEffect(() => {\r\n    const fetchProfile = async () => {\r\n      setIsProfileLoading(true);\r\n      \r\n      try {\r\n        const data = await getProfile();\r\n        setProfileData({\r\n          name: data.name || '',\r\n          phone: data.phone || '',\r\n        });\r\n      } catch (error) {\r\n        console.error('프로필 로드 실패:', error);\r\n        toast.error('프로필 정보를 불러오는데 실패했습니다.');\r\n      } finally {\r\n        setIsProfileLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchProfile();\r\n  }, []);\r\n  \r\n  // 배송지 정보 로드\r\n  useEffect(() => {\r\n    if (!user) return; // user가 세팅된 후에만 실행\r\n    const fetchAddresses = async () => {\r\n      setIsAddressLoading(true);\r\n      try {\r\n        const response = await getAddresses();\r\n        addressDispatch({ type: 'LOAD_ADDRESSES', addresses: response.results || [] });\r\n      } catch (error) {\r\n        console.error('배송지 로드 실패:', error);\r\n        toast.error('배송지 정보를 불러오는데 실패했습니다.');\r\n      } finally {\r\n        setIsAddressLoading(false);\r\n      }\r\n    };\r\n    fetchAddresses();\r\n  }, [user]);\r\n  \r\n  // 프로필 폼 입력 핸들러\r\n  const handleProfileChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setProfileData({\r\n      ...profileData,\r\n      [name]: value,\r\n    });\r\n    \r\n    // 에러 초기화\r\n    if (profileErrors[name]) {\r\n      setProfileErrors({\r\n        ...profileErrors,\r\n        [name]: '',\r\n      });\r\n    }\r\n  };\r\n  \r\n  // 배송지 추가 버튼 클릭\r\n  const handleAddAddressClick = () => {\r\n    addressDispatch({ type: 'OPEN_MODAL' });\r\n  };\r\n  \r\n  // 배송지 수정 버튼 클릭\r\n  const handleEditAddress = (address) => {\r\n    addressDispatch({ type: 'OPEN_MODAL', editingAddress: address });\r\n  };\r\n  \r\n  // 배송지 삭제\r\n  const handleDeleteAddress = async (addressId) => {\r\n    if (!window.confirm('이 배송지를 삭제하시겠습니까?')) return;\r\n    addressDispatch({ type: 'SET_PROCESSING', id: addressId + '-delete' });\r\n    try {\r\n      await deleteAddress(addressId);\r\n      addressDispatch({ type: 'DELETE_ADDRESS', id: addressId });\r\n      toast.success('배송지가 삭제되었습니다.');\r\n      if (addressState.editingAddress && addressState.editingAddress.id === addressId) {\r\n        addressDispatch({ type: 'CLOSE_MODAL' });\r\n      }\r\n    } catch (error) {\r\n      toast.error('배송지 삭제에 실패했습니다.');\r\n    } finally {\r\n      addressDispatch({ type: 'SET_PROCESSING', id: null });\r\n    }\r\n  };\r\n  \r\n  // 기본 배송지 설정\r\n  const handleSetDefaultAddress = async (addressId) => {\r\n    addressDispatch({ type: 'SET_PROCESSING', id: addressId + '-setDefault' });\r\n    try {\r\n      const updated = await updateAddress(addressId, { is_default: true });\r\n      addressDispatch({ type: 'SET_DEFAULT_ADDRESS', id: addressId });\r\n      toast.success('기본 배송지가 변경되었습니다.');\r\n    } catch (error) {\r\n      toast.error('기본 배송지 설정에 실패했습니다.');\r\n    } finally {\r\n      addressDispatch({ type: 'SET_PROCESSING', id: null });\r\n    }\r\n  };\r\n  \r\n  // 배송지 추가/수정 폼 제출\r\n  const handleAddressFormSubmit = async (form) => {\r\n    addressDispatch({ type: 'SET_SAVING', value: true });\r\n    addressDispatch({ type: 'SET_FORM_ERRORS', errors: {} });\r\n    try {\r\n      let updatedAddress;\r\n      if (addressState.editingAddress) {\r\n        updatedAddress = await updateAddress(addressState.editingAddress.id, form);\r\n        addressDispatch({ type: 'UPDATE_ADDRESS', address: updatedAddress });\r\n        toast.success('배송지가 수정되었습니다.');\r\n      } else {\r\n        updatedAddress = await addAddress(form);\r\n        addressDispatch({ type: 'ADD_ADDRESS', address: updatedAddress });\r\n        toast.success('새 배송지가 추가되었습니다.');\r\n      }\r\n      // 기본 배송지로 설정된 경우, 목록에서 반영\r\n      if (updatedAddress.is_default) {\r\n        addressDispatch({ type: 'SET_DEFAULT_ADDRESS', id: updatedAddress.id });\r\n      }\r\n      addressDispatch({ type: 'CLOSE_MODAL' });\r\n    } catch (error) {\r\n      if (error.response && error.response.data) {\r\n        const fieldErrors = {};\r\n        Object.entries(error.response.data).forEach(([key, value]) => {\r\n          fieldErrors[key] = Array.isArray(value) ? value[0] : value;\r\n        });\r\n        addressDispatch({ type: 'SET_FORM_ERRORS', errors: fieldErrors });\r\n      } else {\r\n        toast.error('배송지 저장에 실패했습니다.');\r\n      }\r\n    } finally {\r\n      addressDispatch({ type: 'SET_SAVING', value: false });\r\n    }\r\n  };\r\n  \r\n  // 배송지 추가/수정 모달 닫기\r\n  const handleAddressModalClose = () => {\r\n    addressDispatch({ type: 'CLOSE_MODAL' });\r\n  };\r\n  \r\n  // 프로필 저장 핸들러\r\n  const handleSaveProfile = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    // 프로필 유효성 검증\r\n    const errors = {};\r\n    \r\n    if (!validateRequired(profileData.name)) {\r\n      errors.name = '이름을 입력해주세요.';\r\n    }\r\n    \r\n    if (profileData.phone && !validatePhone(profileData.phone)) {\r\n      errors.phone = '올바른 전화번호 형식이 아닙니다.';\r\n    }\r\n    \r\n    setProfileErrors(errors);\r\n    \r\n    if (Object.keys(errors).length > 0) {\r\n      return;\r\n    }\r\n    \r\n    setIsSavingProfile(true);\r\n    \r\n    try {\r\n      const updatedProfile = await updateProfile(profileData);\r\n      updateUserInfo(updatedProfile);\r\n      toast.success('프로필이 성공적으로 저장되었습니다.');\r\n    } catch (error) {\r\n      console.error('프로필 저장 실패:', error);\r\n      \r\n      if (error.response && error.response.data) {\r\n        // 필드별 에러 처리\r\n        const fieldErrors = {};\r\n        Object.entries(error.response.data).forEach(([key, value]) => {\r\n          fieldErrors[key] = Array.isArray(value) ? value[0] : value;\r\n        });\r\n        \r\n        if (Object.keys(fieldErrors).length > 0) {\r\n          setProfileErrors(fieldErrors);\r\n        } else {\r\n          toast.error('프로필 저장에 실패했습니다.');\r\n        }\r\n      } else {\r\n        toast.error('서버 연결에 문제가 있습니다.');\r\n      }\r\n    } finally {\r\n      setIsSavingProfile(false);\r\n    }\r\n  };\r\n  \r\n  // 로딩 중일 때\r\n  if (isProfileLoading || isAddressLoading) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:px-8\">\r\n        <Loading text=\"프로필 정보를 불러오는 중입니다...\" />\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <div className=\"bg-white\">\r\n      <div className=\"max-w-7xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:px-8\">\r\n        <div className=\"space-y-12\">\r\n          {/* 프로필 정보 */}\r\n          <div>\r\n            <h2 className=\"text-3xl font-extrabold text-gray-900\">내 정보</h2>\r\n            <p className=\"mt-2 text-gray-600\">\r\n              계정 정보를 관리합니다.\r\n            </p>\r\n            \r\n            <form onSubmit={handleSaveProfile} className=\"mt-6\">\r\n              <div className=\"max-w-3xl mx-auto bg-white shadow overflow-hidden rounded-lg\">\r\n                <div className=\"px-4 py-5 sm:p-6\">\r\n                  <div className=\"grid grid-cols-6 gap-6\">\r\n                    {/* 이메일 (읽기 전용) */}\r\n                    <div className=\"col-span-6 sm:col-span-4\">\r\n                      <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\r\n                        이메일\r\n                      </label>\r\n                      <input\r\n                        type=\"email\"\r\n                        name=\"email\"\r\n                        id=\"email\"\r\n                        value={user?.email || ''}\r\n                        readOnly\r\n                        className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-50 text-gray-500 sm:text-sm\"\r\n                      />\r\n                      <p className=\"mt-1 text-xs text-gray-500\">이메일은 변경할 수 없습니다.</p>\r\n                    </div>\r\n                    \r\n                    {/* 이름 */}\r\n                    <div className=\"col-span-6 sm:col-span-4\">\r\n                      <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700\">\r\n                        이름\r\n                      </label>\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"name\"\r\n                        id=\"name\"\r\n                        value={profileData.name}\r\n                        onChange={handleProfileChange}\r\n                        className={`mt-1 block w-full border ${\r\n                          profileErrors.name ? 'border-red-300' : 'border-gray-300'\r\n                        } rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm`}\r\n                      />\r\n                      {profileErrors.name && (\r\n                        <p className=\"mt-2 text-sm text-red-600\">\r\n                          {profileErrors.name}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                    \r\n                    {/* 전화번호 */}\r\n                    <div className=\"col-span-6 sm:col-span-4\">\r\n                      <label htmlFor=\"phone\" className=\"block text-sm font-medium text-gray-700\">\r\n                        전화번호\r\n                      </label>\r\n                      <input\r\n                        type=\"tel\"\r\n                        name=\"phone\"\r\n                        id=\"phone\"\r\n                        value={profileData.phone}\r\n                        onChange={handleProfileChange}\r\n                        placeholder=\"01012345678\"\r\n                        className={`mt-1 block w-full border ${\r\n                          profileErrors.phone ? 'border-red-300' : 'border-gray-300'\r\n                        } rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm`}\r\n                      />\r\n                      {profileErrors.phone ? (\r\n                        <p className=\"mt-2 text-sm text-red-600\">\r\n                          {profileErrors.phone}\r\n                        </p>\r\n                      ) : (\r\n                        <p className=\"mt-1 text-xs text-gray-500\">\r\n                          - 없이 숫자만 입력해주세요.\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"px-4 py-3 bg-gray-50 text-right sm:px-6\">\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"primary\"\r\n                    isLoading={isSavingProfile}\r\n                  >\r\n                    저장\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n          \r\n          {/* 배송지 관리 */}\r\n          <div>\r\n            <div className=\"flex justify-between items-center\">\r\n              <div>\r\n                <h2 className=\"text-3xl font-extrabold text-gray-900\">배송지 관리</h2>\r\n                <p className=\"mt-2 text-gray-600\">주문 시 사용할 배송지를 관리합니다.</p>\r\n              </div>\r\n              <Button onClick={handleAddAddressClick} variant=\"primary\">새 배송지 추가</Button>\r\n            </div>\r\n            {/* 배송지 목록 */}\r\n            <div className=\"mt-6 space-y-6\">\r\n              {addressState.addresses.length === 0 ? (\r\n                <div className=\"bg-gray-50 p-6 text-center rounded-lg\">\r\n                  <svg className=\"mx-auto h-12 w-12 text-gray-400\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                  </svg>\r\n                  <h3 className=\"mt-2 text-base font-medium text-gray-900\">등록된 배송지가 없습니다</h3>\r\n                  <p className=\"mt-1 text-sm text-gray-500\">새 배송지를 추가해주세요.</p>\r\n                </div>\r\n              ) : (\r\n                addressState.addresses.map(address => (\r\n                  <AddressCard\r\n                    key={address.id}\r\n                    address={address}\r\n                    onEdit={handleEditAddress}\r\n                    onDelete={handleDeleteAddress}\r\n                    onSetDefault={handleSetDefaultAddress}\r\n                    isProcessing={addressState.addressProcessingId && addressState.addressProcessingId.startsWith(address.id) ? addressState.addressProcessingId.split('-')[1] : false}\r\n                  />\r\n                ))\r\n              )}\r\n            </div>\r\n            {/* 배송지 추가/수정 모달 */}\r\n            <Modal\r\n              isOpen={addressState.showAddressModal}\r\n              onClose={handleAddressModalClose}\r\n              title={addressState.editingAddress ? '배송지 수정' : '새 배송지 추가'}\r\n            >\r\n              <AddressForm\r\n                initialData={addressState.editingAddress ? addressState.editingAddress : undefined}\r\n                onSubmit={handleAddressFormSubmit}\r\n                onCancel={handleAddressModalClose}\r\n                isLoading={addressState.isSavingAddress}\r\n                errors={addressState.addressFormErrors}\r\n              />\r\n            </Modal>\r\n          </div>\r\n          \r\n          {/* 주문 내역 링크 */}\r\n          <div className=\"text-center\">\r\n            <Link to=\"/orders\">\r\n              <Button variant=\"secondary\">주문 내역 보기</Button>\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}