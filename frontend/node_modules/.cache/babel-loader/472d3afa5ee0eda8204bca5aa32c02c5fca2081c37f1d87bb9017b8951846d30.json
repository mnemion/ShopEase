{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useCallback, useRef, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from './context/AuthContext';\nimport apiClient from './api/client'; // Axios 인스턴스 import\nimport { getProfile } from './api/auth';\nimport { toast } from 'react-toastify';\n\n/**\n * 소셜 로그인 결과를 처리하는 핸들러 컴포넌트\n * 백엔드 팝업으로부터 메시지를 받아 로그인 처리를 완료하는 역할\n */\nconst SocialLoginHandler = () => {\n  _s();\n  const {\n    login,\n    isAuthenticated\n  } = useAuth();\n  const navigate = useNavigate();\n  const [lastChecked, setLastChecked] = useState(0);\n  const checkInterval = useRef(null);\n\n  // 디버깅 함수\n  const debug = message => {\n    console.log(\"[SocialLoginHandler]\", message);\n  };\n\n  // 로컬 스토리지에서 토큰 처리\n  const processLocalStorageTokens = useCallback(async () => {\n    debug(\"로컬 스토리지에서 토큰 확인\");\n    const access_token = localStorage.getItem('access_token');\n    const refresh_token = localStorage.getItem('refresh_token');\n    const timestamp = localStorage.getItem('social_login_timestamp');\n    if (!access_token || !refresh_token) {\n      debug(\"로컬 스토리지에 토큰이 없음\");\n      return false;\n    }\n\n    // 이미 인증되었으면 처리하지 않음\n    if (isAuthenticated) {\n      debug(\"이미 인증된 상태, 로컬 스토리지 토큰 처리 건너뜀\");\n      return false;\n    }\n\n    // 최근에 체크했는지 확인 (5초 이내)\n    const now = Date.now();\n    const lastCheck = parseInt(timestamp || '0');\n\n    // 타임스탬프가 없거나 너무 오래되었으면 처리하지 않음\n    if (!timestamp || now - lastCheck > 300000) {\n      // 5분 이상 지났으면 만료된 것으로 간주\n      debug(`토큰 타임스탬프가 오래됨 (${(now - lastCheck) / 1000}초 전)`);\n      return false;\n    }\n    debug(`로컬 스토리지에서 최근 토큰 발견: ${access_token.substring(0, 10)}... (${(now - lastCheck) / 1000}초 전)`);\n    try {\n      // API 클라이언트 인증 헤더 설정\n      apiClient.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n      debug(\"인증 헤더 설정 완료\");\n\n      // 사용자 프로필 정보 가져오기\n      debug(\"사용자 프로필 요청 시작...\");\n      const userData = await getProfile();\n      debug(\"사용자 프로필 수신 성공:\", userData);\n\n      // 인증 컨텍스트 업데이트\n      login(access_token, refresh_token, userData);\n      debug(\"로그인 완료! 인증 컨텍스트 업데이트됨\");\n\n      // 성공 메시지 표시\n      toast.success(`${userData.name || userData.email || '사용자'}님 환영합니다!`);\n\n      // 소셜 로그인 성공 이벤트 발생\n      window.dispatchEvent(new CustomEvent('socialLoginComplete', {\n        detail: {\n          success: true,\n          provider: userData.email ? userData.email.split('@')[1] : 'unknown'\n        }\n      }));\n\n      // 홈 페이지로 리다이렉트\n      navigate('/', {\n        replace: true\n      });\n\n      // 타임스탬프 삭제\n      localStorage.removeItem('social_login_timestamp');\n      return true;\n    } catch (error) {\n      console.error('로컬 스토리지 토큰 처리 중 오류:', error);\n      if (error.response) {\n        debug(`서버 응답: ${error.response.status} - ${JSON.stringify(error.response.data || {})}`);\n      }\n\n      // 토큰이 유효하지 않은 경우 제거\n      if (error.response && (error.response.status === 401 || error.response.status === 403)) {\n        debug(\"토큰이 유효하지 않음, 제거\");\n        localStorage.removeItem('access_token');\n        localStorage.removeItem('refresh_token');\n        localStorage.removeItem('social_login_timestamp');\n      }\n      delete apiClient.defaults.headers.common['Authorization'];\n      return false;\n    }\n  }, [login, navigate, isAuthenticated]);\n\n  // useCallback으로 함수 메모이제이션\n  const handleMessage = useCallback(async event => {\n    var _event$data, _event$data2;\n    debug(\"메시지 이벤트 수신: \" + JSON.stringify(event.origin));\n\n    // 1) HMR 메시지 무시\n    if (((_event$data = event.data) === null || _event$data === void 0 ? void 0 : _event$data.type) === 'webpackOk') {\n      debug(\"HMR 메시지 무시\");\n      return;\n    }\n\n    // 세부 이벤트 데이터 로깅 (민감 정보 제외)\n    const eventDataType = ((_event$data2 = event.data) === null || _event$data2 === void 0 ? void 0 : _event$data2.type) || 'no-type';\n    debug(`이벤트 데이터 타입: ${eventDataType}`);\n\n    // 2) 출처 확인\n    if (event.origin !== 'http://localhost:8000') {\n      debug(`허용되지 않은 오리진: ${event.origin}`);\n      return;\n    }\n    // 3) 메시지 타입 확인\n    const {\n      type,\n      access_token,\n      refresh_token\n    } = event.data || {};\n    if (type !== 'social-login-success') {\n      debug(`지원되지 않는 메시지 타입: ${type}`);\n      return;\n    }\n    debug(\"소셜 로그인 성공 메시지를 처리합니다\");\n\n    // 토큰 유효성 검사\n    if (!access_token || !refresh_token) {\n      debug(\"토큰 정보가 누락되었습니다\");\n      toast.error(\"로그인 정보가 유효하지 않습니다\");\n      return;\n    }\n    debug(`토큰 정보 확인됨: ${access_token.substring(0, 10)}...`);\n    try {\n      // 1. 로컬 스토리지에 토큰 저장\n      localStorage.setItem('access_token', access_token);\n      localStorage.setItem('refresh_token', refresh_token);\n      localStorage.setItem('social_login_timestamp', Date.now().toString());\n      debug(\"토큰이 로컬 스토리지에 저장됨\");\n\n      // 2. API 클라이언트 인증 헤더 설정\n      apiClient.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n      debug(\"인증 헤더 설정 완료\");\n\n      // 3. 사용자 프로필 정보 가져오기\n      debug(\"사용자 프로필 요청 시작...\");\n      const userData = await getProfile();\n      debug(\"사용자 프로필 수신 성공:\", userData);\n\n      // 4. 인증 컨텍스트 업데이트\n      login(access_token, refresh_token, userData);\n      debug(\"로그인 완료! 인증 컨텍스트 업데이트됨\");\n\n      // 5. 성공 메시지 표시\n      toast.success(`${userData.name || userData.email || '사용자'}님 환영합니다!`, {\n        position: \"top-center\",\n        autoClose: 3000\n      });\n\n      // 6. 홈 페이지로 리다이렉트\n      debug(\"홈 페이지로 이동합니다\");\n      navigate('/', {\n        replace: true\n      });\n\n      // 7. 소셜 로그인 성공 이벤트 발생 (옵션)\n      window.dispatchEvent(new CustomEvent('socialLoginComplete', {\n        detail: {\n          success: true,\n          provider: userData.email ? userData.email.split('@')[1] : 'unknown'\n        }\n      }));\n    } catch (error) {\n      console.error('소셜 로그인 처리 중 오류:', error);\n      debug(`오류 세부 정보: ${error.message}`);\n      if (error.response) {\n        debug(`서버 응답: ${error.response.status} - ${JSON.stringify(error.response.data || {})}`);\n      }\n      toast.error('로그인 처리 중 오류가 발생했습니다');\n\n      // 오류 발생 시 토큰 삭제\n      localStorage.removeItem('access_token');\n      localStorage.removeItem('refresh_token');\n      localStorage.removeItem('social_login_timestamp');\n      delete apiClient.defaults.headers.common['Authorization'];\n      navigate('/login');\n    }\n  }, [login, navigate]);\n\n  // 로컬 스토리지 이벤트 핸들러\n  const handleStorageChange = useCallback(event => {\n    if (event.key === 'social_login_timestamp' && event.newValue) {\n      debug(\"다른 탭에서 소셜 로그인 토큰 변경 감지\");\n      processLocalStorageTokens();\n    }\n  }, [processLocalStorageTokens]);\n\n  // 이벤트 리스너 등록 및 제거 (StrictMode 중복 방지)\n  const listenerRegistered = useRef(false);\n  useEffect(() => {\n    debug(\"컴포넌트 마운트\");\n\n    // 로컬 스토리지에서 토큰 확인\n    processLocalStorageTokens().then(success => {\n      debug(`로컬 스토리지 토큰 처리 ${success ? '성공' : '실패 또는 토큰 없음'}`);\n    });\n    if (!listenerRegistered.current) {\n      debug(\"메시지 이벤트 리스너 등록\");\n      window.addEventListener('message', handleMessage);\n      window.addEventListener('storage', handleStorageChange);\n      listenerRegistered.current = true;\n    }\n\n    // 정기적으로 로컬 스토리지 확인 (1초 간격)\n    checkInterval.current = setInterval(() => {\n      const now = Date.now();\n      // 마지막 체크로부터 1초가 지났을 때만 체크\n      if (now - lastChecked > 1000) {\n        setLastChecked(now);\n        processLocalStorageTokens().then(success => {\n          if (success) {\n            // 성공했으면 인터벌 클리어\n            if (checkInterval.current) {\n              clearInterval(checkInterval.current);\n              checkInterval.current = null;\n            }\n          }\n        });\n      }\n    }, 1000);\n    return () => {\n      if (listenerRegistered.current) {\n        debug(\"메시지 이벤트 리스너 제거\");\n        window.removeEventListener('message', handleMessage);\n        window.removeEventListener('storage', handleStorageChange);\n        listenerRegistered.current = false;\n      }\n      if (checkInterval.current) {\n        clearInterval(checkInterval.current);\n        checkInterval.current = null;\n      }\n    };\n  }, [handleMessage, processLocalStorageTokens, handleStorageChange, lastChecked]);\n  return null; // UI 렌더링 없음\n};\n_s(SocialLoginHandler, \"tpkQ19wA6TXgcc4aLWKY+zOTZkk=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = SocialLoginHandler;\nexport default SocialLoginHandler;\nvar _c;\n$RefreshReg$(_c, \"SocialLoginHandler\");","map":{"version":3,"names":["useEffect","useCallback","useRef","useState","useNavigate","useAuth","apiClient","getProfile","toast","SocialLoginHandler","_s","login","isAuthenticated","navigate","lastChecked","setLastChecked","checkInterval","debug","message","console","log","processLocalStorageTokens","access_token","localStorage","getItem","refresh_token","timestamp","now","Date","lastCheck","parseInt","substring","defaults","headers","common","userData","success","name","email","window","dispatchEvent","CustomEvent","detail","provider","split","replace","removeItem","error","response","status","JSON","stringify","data","handleMessage","event","_event$data","_event$data2","origin","type","eventDataType","setItem","toString","position","autoClose","handleStorageChange","key","newValue","listenerRegistered","then","current","addEventListener","setInterval","clearInterval","removeEventListener","_c","$RefreshReg$"],"sources":["C:/Users/COM-LM/Documents/ShopEase/frontend/src/SocialLoginHandler.js"],"sourcesContent":["import { useEffect, useCallback, useRef, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from './context/AuthContext';\nimport apiClient from './api/client'; // Axios 인스턴스 import\nimport { getProfile } from './api/auth';\nimport { toast } from 'react-toastify';\n\n/**\n * 소셜 로그인 결과를 처리하는 핸들러 컴포넌트\n * 백엔드 팝업으로부터 메시지를 받아 로그인 처리를 완료하는 역할\n */\nconst SocialLoginHandler = () => {\n  const { login, isAuthenticated } = useAuth();\n  const navigate = useNavigate();\n  const [lastChecked, setLastChecked] = useState(0);\n  const checkInterval = useRef(null);\n\n  // 디버깅 함수\n  const debug = (message) => {\n    console.log(\"[SocialLoginHandler]\", message);\n  };\n\n  // 로컬 스토리지에서 토큰 처리\n  const processLocalStorageTokens = useCallback(async () => {\n    debug(\"로컬 스토리지에서 토큰 확인\");\n    const access_token = localStorage.getItem('access_token');\n    const refresh_token = localStorage.getItem('refresh_token');\n    const timestamp = localStorage.getItem('social_login_timestamp');\n\n    if (!access_token || !refresh_token) {\n      debug(\"로컬 스토리지에 토큰이 없음\");\n      return false;\n    }\n\n    // 이미 인증되었으면 처리하지 않음\n    if (isAuthenticated) {\n      debug(\"이미 인증된 상태, 로컬 스토리지 토큰 처리 건너뜀\");\n      return false;\n    }\n\n    // 최근에 체크했는지 확인 (5초 이내)\n    const now = Date.now();\n    const lastCheck = parseInt(timestamp || '0');\n    \n    // 타임스탬프가 없거나 너무 오래되었으면 처리하지 않음\n    if (!timestamp || now - lastCheck > 300000) { // 5분 이상 지났으면 만료된 것으로 간주\n      debug(`토큰 타임스탬프가 오래됨 (${(now - lastCheck) / 1000}초 전)`);\n      return false;\n    }\n\n    debug(`로컬 스토리지에서 최근 토큰 발견: ${access_token.substring(0, 10)}... (${(now - lastCheck) / 1000}초 전)`);\n    \n    try {\n      // API 클라이언트 인증 헤더 설정\n      apiClient.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n      debug(\"인증 헤더 설정 완료\");\n      \n      // 사용자 프로필 정보 가져오기\n      debug(\"사용자 프로필 요청 시작...\");\n      const userData = await getProfile();\n      debug(\"사용자 프로필 수신 성공:\", userData);\n      \n      // 인증 컨텍스트 업데이트\n      login(access_token, refresh_token, userData);\n      debug(\"로그인 완료! 인증 컨텍스트 업데이트됨\");\n      \n      // 성공 메시지 표시\n      toast.success(`${userData.name || userData.email || '사용자'}님 환영합니다!`);\n      \n      // 소셜 로그인 성공 이벤트 발생\n      window.dispatchEvent(new CustomEvent('socialLoginComplete', { \n        detail: { success: true, provider: userData.email ? userData.email.split('@')[1] : 'unknown' } \n      }));\n      \n      // 홈 페이지로 리다이렉트\n      navigate('/', { replace: true });\n      \n      // 타임스탬프 삭제\n      localStorage.removeItem('social_login_timestamp');\n      \n      return true;\n    } catch (error) {\n      console.error('로컬 스토리지 토큰 처리 중 오류:', error);\n      \n      if (error.response) {\n        debug(`서버 응답: ${error.response.status} - ${JSON.stringify(error.response.data || {})}`);\n      }\n      \n      // 토큰이 유효하지 않은 경우 제거\n      if (error.response && (error.response.status === 401 || error.response.status === 403)) {\n        debug(\"토큰이 유효하지 않음, 제거\");\n        localStorage.removeItem('access_token');\n        localStorage.removeItem('refresh_token');\n        localStorage.removeItem('social_login_timestamp');\n      }\n      \n      delete apiClient.defaults.headers.common['Authorization'];\n      \n      return false;\n    }\n  }, [login, navigate, isAuthenticated]);\n\n  // useCallback으로 함수 메모이제이션\n  const handleMessage = useCallback(async (event) => {\n    debug(\"메시지 이벤트 수신: \" + JSON.stringify(event.origin));\n    \n    // 1) HMR 메시지 무시\n    if (event.data?.type === 'webpackOk') {\n      debug(\"HMR 메시지 무시\");\n      return;\n    }\n    \n    // 세부 이벤트 데이터 로깅 (민감 정보 제외)\n    const eventDataType = event.data?.type || 'no-type';\n    debug(`이벤트 데이터 타입: ${eventDataType}`);\n    \n    // 2) 출처 확인\n    if (event.origin !== 'http://localhost:8000') {\n      debug(`허용되지 않은 오리진: ${event.origin}`);\n      return;\n    }\n    // 3) 메시지 타입 확인\n    const { type, access_token, refresh_token } = event.data || {};\n    if (type !== 'social-login-success') {\n      debug(`지원되지 않는 메시지 타입: ${type}`);\n      return;\n    }\n    debug(\"소셜 로그인 성공 메시지를 처리합니다\");\n    \n    // 토큰 유효성 검사\n    if (!access_token || !refresh_token) {\n      debug(\"토큰 정보가 누락되었습니다\");\n      toast.error(\"로그인 정보가 유효하지 않습니다\");\n      return;\n    }\n\n    debug(`토큰 정보 확인됨: ${access_token.substring(0, 10)}...`);\n    \n    try {\n      // 1. 로컬 스토리지에 토큰 저장\n      localStorage.setItem('access_token', access_token);\n      localStorage.setItem('refresh_token', refresh_token);\n      localStorage.setItem('social_login_timestamp', Date.now().toString());\n      debug(\"토큰이 로컬 스토리지에 저장됨\");\n      \n      // 2. API 클라이언트 인증 헤더 설정\n      apiClient.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n      debug(\"인증 헤더 설정 완료\");\n      \n      // 3. 사용자 프로필 정보 가져오기\n      debug(\"사용자 프로필 요청 시작...\");\n      const userData = await getProfile();\n      debug(\"사용자 프로필 수신 성공:\", userData);\n      \n      // 4. 인증 컨텍스트 업데이트\n      login(access_token, refresh_token, userData);\n      debug(\"로그인 완료! 인증 컨텍스트 업데이트됨\");\n      \n      // 5. 성공 메시지 표시\n      toast.success(`${userData.name || userData.email || '사용자'}님 환영합니다!`, {\n        position: \"top-center\",\n        autoClose: 3000\n      });\n      \n      // 6. 홈 페이지로 리다이렉트\n      debug(\"홈 페이지로 이동합니다\");\n      navigate('/', { replace: true });\n      \n      // 7. 소셜 로그인 성공 이벤트 발생 (옵션)\n      window.dispatchEvent(new CustomEvent('socialLoginComplete', { \n        detail: { success: true, provider: userData.email ? userData.email.split('@')[1] : 'unknown' } \n      }));\n      \n    } catch (error) {\n      console.error('소셜 로그인 처리 중 오류:', error);\n      debug(`오류 세부 정보: ${error.message}`);\n      \n      if (error.response) {\n        debug(`서버 응답: ${error.response.status} - ${JSON.stringify(error.response.data || {})}`);\n      }\n      \n      toast.error('로그인 처리 중 오류가 발생했습니다');\n      \n      // 오류 발생 시 토큰 삭제\n      localStorage.removeItem('access_token');\n      localStorage.removeItem('refresh_token');\n      localStorage.removeItem('social_login_timestamp');\n      delete apiClient.defaults.headers.common['Authorization'];\n      \n      navigate('/login');\n    }\n  }, [login, navigate]);\n\n  // 로컬 스토리지 이벤트 핸들러\n  const handleStorageChange = useCallback((event) => {\n    if (event.key === 'social_login_timestamp' && event.newValue) {\n      debug(\"다른 탭에서 소셜 로그인 토큰 변경 감지\");\n      processLocalStorageTokens();\n    }\n  }, [processLocalStorageTokens]);\n\n  // 이벤트 리스너 등록 및 제거 (StrictMode 중복 방지)\n  const listenerRegistered = useRef(false);\n  useEffect(() => {\n    debug(\"컴포넌트 마운트\");\n    \n    // 로컬 스토리지에서 토큰 확인\n    processLocalStorageTokens()\n      .then(success => {\n        debug(`로컬 스토리지 토큰 처리 ${success ? '성공' : '실패 또는 토큰 없음'}`);\n      });\n    \n    if (!listenerRegistered.current) {\n      debug(\"메시지 이벤트 리스너 등록\");\n      window.addEventListener('message', handleMessage);\n      window.addEventListener('storage', handleStorageChange);\n      listenerRegistered.current = true;\n    }\n    \n    // 정기적으로 로컬 스토리지 확인 (1초 간격)\n    checkInterval.current = setInterval(() => {\n      const now = Date.now();\n      // 마지막 체크로부터 1초가 지났을 때만 체크\n      if (now - lastChecked > 1000) {\n        setLastChecked(now);\n        processLocalStorageTokens()\n          .then(success => {\n            if (success) {\n              // 성공했으면 인터벌 클리어\n              if (checkInterval.current) {\n                clearInterval(checkInterval.current);\n                checkInterval.current = null;\n              }\n            }\n          });\n      }\n    }, 1000);\n    \n    return () => {\n      if (listenerRegistered.current) {\n        debug(\"메시지 이벤트 리스너 제거\");\n        window.removeEventListener('message', handleMessage);\n        window.removeEventListener('storage', handleStorageChange);\n        listenerRegistered.current = false;\n      }\n      \n      if (checkInterval.current) {\n        clearInterval(checkInterval.current);\n        checkInterval.current = null;\n      }\n    };\n  }, [handleMessage, processLocalStorageTokens, handleStorageChange, lastChecked]);\n\n  return null; // UI 렌더링 없음\n};\n\nexport default SocialLoginHandler;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}