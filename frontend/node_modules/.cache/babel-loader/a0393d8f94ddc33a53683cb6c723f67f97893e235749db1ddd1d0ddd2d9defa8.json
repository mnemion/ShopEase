{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,Link,useNavigate}from'react-router-dom';import{getProduct,createReview}from'../api/products';import{useAuth}from'../context/AuthContext';import{useCart}from'../context/CartContext';import{formatCurrency,formatDate}from'../utils/formatters';import Button from'../components/ui/Button';import Loading from'../components/ui/Loading';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductDetail=()=>{var _product$images$activ;const{id}=useParams();const navigate=useNavigate();const{isAuthenticated}=useAuth();const{addItemToCart,isLoading:isCartLoading}=useCart();const[product,setProduct]=useState(null);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);const[quantity,setQuantity]=useState(1);const[activeImageIndex,setActiveImageIndex]=useState(0);const[isReviewFormOpen,setIsReviewFormOpen]=useState(false);const[reviewFormData,setReviewFormData]=useState({title:'',content:'',rating:5});const[isSubmittingReview,setIsSubmittingReview]=useState(false);// 상품 데이터 가져오기\nuseEffect(()=>{const fetchProduct=async()=>{setIsLoading(true);setError(null);try{const data=await getProduct(id);setProduct(data);setActiveImageIndex(0);// 이미지 인덱스 초기화\n}catch(error){console.error('상품 로드 실패:',error);setError('상품 정보를 불러오는데 실패했습니다.');}finally{setIsLoading(false);}};fetchProduct();},[id]);// 수량 변경 핸들러\nconst handleQuantityChange=e=>{const value=parseInt(e.target.value);if(value>0&&value<=product.stock){setQuantity(value);}};// 수량 증가 핸들러\nconst increaseQuantity=()=>{if(quantity<product.stock){setQuantity(quantity+1);}};// 수량 감소 핸들러\nconst decreaseQuantity=()=>{if(quantity>1){setQuantity(quantity-1);}};// 장바구니에 추가 핸들러\nconst handleAddToCart=async()=>{if(!isAuthenticated){toast.warning('로그인이 필요합니다.');navigate('/login');return;}const success=await addItemToCart(product.id,quantity);if(success){setQuantity(1);// 수량 초기화\n}};// 리뷰 폼 입력 핸들러\nconst handleReviewChange=e=>{const{name,value}=e.target;setReviewFormData({...reviewFormData,[name]:name==='rating'?parseInt(value):value});};// 리뷰 작성 핸들러\nconst handleSubmitReview=async e=>{e.preventDefault();if(!isAuthenticated){toast.warning('로그인이 필요합니다.');navigate('/login');return;}setIsSubmittingReview(true);try{await createReview(product.id,reviewFormData);toast.success('리뷰가 등록되었습니다.');// 리뷰 폼 초기화 및 숨기기\nsetReviewFormData({title:'',content:'',rating:5});setIsReviewFormOpen(false);// 상품 정보 새로고침 (리뷰 포함)\nconst updatedProduct=await getProduct(id);setProduct(updatedProduct);}catch(error){console.error('리뷰 작성 실패:',error);if(error.response&&error.response.data){if(error.response.data.detail){toast.error(error.response.data.detail);}else{toast.error('리뷰 작성에 실패했습니다.');}}else{toast.error('서버 연결에 문제가 있습니다.');}}finally{setIsSubmittingReview(false);}};// 로딩 중\nif(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsx(Loading,{text:\"\\uC0C1\\uD488 \\uC815\\uBCF4\\uB97C \\uBD88\\uB7EC\\uC624\\uB294 \\uC911\\uC785\\uB2C8\\uB2E4...\"})});}// 에러 발생 시\nif(error){return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"\\uC624\\uB958\\uAC00 \\uBC1C\\uC0DD\\uD588\\uC2B5\\uB2C8\\uB2E4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:error}),/*#__PURE__*/_jsx(Button,{onClick:()=>navigate(-1),children:\"\\uC774\\uC804 \\uD398\\uC774\\uC9C0\\uB85C \\uB3CC\\uC544\\uAC00\\uAE30\"})]})});}// 상품이 없는 경우\nif(!product){return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"\\uC0C1\\uD488\\uC744 \\uCC3E\\uC744 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"\\uC694\\uCCAD\\uD558\\uC2E0 \\uC0C1\\uD488 \\uC815\\uBCF4\\uAC00 \\uC874\\uC7AC\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(Link,{to:\"/products\",children:/*#__PURE__*/_jsx(Button,{children:\"\\uC0C1\\uD488 \\uBAA9\\uB85D\\uC73C\\uB85C \\uB3CC\\uC544\\uAC00\\uAE30\"})})]})});}// 리뷰 별점 표시 컴포넌트\nconst StarRating=_ref=>{let{rating}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"flex\",children:[1,2,3,4,5].map(star=>/*#__PURE__*/_jsx(\"svg\",{className:`h-5 w-5 ${star<=rating?'text-yellow-500':'text-gray-300'}`,xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"})},star))});};return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:grid lg:grid-cols-2 lg:gap-x-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:max-w-lg lg:self-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"aspect-w-1 aspect-h-1 rounded-lg overflow-hidden\",children:/*#__PURE__*/_jsx(\"img\",{src:((_product$images$activ=product.images[activeImageIndex])===null||_product$images$activ===void 0?void 0:_product$images$activ.image)||'/assets/placeholder-product.jpg',alt:product.name,className:\"w-full h-full object-center object-cover\"})}),product.images.length>1&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 grid grid-cols-6 gap-2\",children:product.images.map((image,index)=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveImageIndex(index),className:`relative rounded-md overflow-hidden ${activeImageIndex===index?'ring-2 ring-indigo-500':'ring-1 ring-gray-200'}`,children:[/*#__PURE__*/_jsx(\"img\",{src:image.image,alt:image.alt_text||`${product.name} 이미지 ${index+1}`,className:\"w-full h-full object-center object-cover\"}),/*#__PURE__*/_jsx(\"span\",{className:`absolute inset-0 ${activeImageIndex===index?'ring-2 ring-inset ring-indigo-500':''}`,\"aria-hidden\":\"true\"})]},image.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-10 lg:mt-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(Link,{to:`/categories/${product.category}`,className:\"text-sm text-indigo-600 hover:text-indigo-500\",children:product.category_name})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-extrabold tracking-tight text-gray-900\",children:product.name}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(StarRating,{rating:product.rating_avg}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-sm text-gray-500\",children:[product.rating_avg,\"/5 (\",product.review_count,\"\\uAC1C \\uB9AC\\uBDF0)\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:product.is_on_sale?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-end\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xl line-through text-gray-400\",children:formatCurrency(product.price)}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl text-red-600 font-bold ml-3\",children:formatCurrency(product.current_price)})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl text-gray-900 font-bold\",children:formatCurrency(product.price)})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:product.stock>0?`재고: ${product.stock}개`:'품절'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900\",children:\"\\uC0C1\\uD488 \\uC124\\uBA85\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 prose prose-sm text-gray-500\",dangerouslySetInnerHTML:{__html:product.description}})]}),product.stock>0?/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-3 text-gray-700\",children:\"\\uC218\\uB7C9\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:decreaseQuantity,className:\"text-gray-500 focus:outline-none focus:text-gray-600\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5\",fill:\"none\",strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M20 12H4\"})})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",max:product.stock,value:quantity,onChange:handleQuantityChange,className:\"mx-2 border text-center w-16 rounded-md\"}),/*#__PURE__*/_jsx(\"button\",{onClick:increaseQuantity,className:\"text-gray-500 focus:outline-none focus:text-gray-600\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5\",fill:\"none\",strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 4v16m8-8H4\"})})})]})]}),/*#__PURE__*/_jsx(Button,{onClick:handleAddToCart,variant:\"primary\",size:\"large\",isLoading:isCartLoading,className:\"w-full\",children:\"\\uC7A5\\uBC14\\uAD6C\\uB2C8\\uC5D0 \\uB2F4\\uAE30\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"mt-8\",children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",size:\"large\",disabled:true,className:\"w-full\",children:\"\\uD488\\uC808\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-16 pt-10 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:\"\\uB9AC\\uBDF0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(StarRating,{rating:product.rating_avg}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-gray-600\",children:[product.review_count,\"\\uAC1C\\uC758 \\uB9AC\\uBDF0\"]})]}),/*#__PURE__*/_jsx(Button,{onClick:()=>{if(isAuthenticated){setIsReviewFormOpen(!isReviewFormOpen);}else{toast.warning('로그인이 필요합니다.');navigate('/login');}},variant:isReviewFormOpen?'secondary':'primary',children:isReviewFormOpen?'취소':'리뷰 작성'})]}),isReviewFormOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 bg-gray-50 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"\\uB9AC\\uBDF0 \\uC791\\uC131\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmitReview,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\uD3C9\\uC810\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[[1,2,3,4,5].map(rating=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setReviewFormData({...reviewFormData,rating}),className:\"p-1 focus:outline-none\",children:/*#__PURE__*/_jsx(\"svg\",{className:`h-8 w-8 ${rating<=reviewFormData.rating?'text-yellow-500':'text-gray-300'}`,xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"})})},rating)),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-sm text-gray-500\",children:[reviewFormData.rating,\"\\uC810\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\uC81C\\uBAA9\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",value:reviewFormData.title,onChange:handleReviewChange,required:true,className:\"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"content\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"content\",name:\"content\",value:reviewFormData.content,onChange:handleReviewChange,required:true,rows:4,className:\"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",isLoading:isSubmittingReview,children:\"\\uB9AC\\uBDF0 \\uB4F1\\uB85D\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 space-y-8\",children:product.reviews.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-8\",children:\"\\uC544\\uC9C1 \\uB9AC\\uBDF0\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4. \\uCCAB \\uB9AC\\uBDF0\\uB97C \\uC791\\uC131\\uD574\\uBCF4\\uC138\\uC694!\"}):product.reviews.map(review=>/*#__PURE__*/_jsxs(\"div\",{className:\"border-b border-gray-200 pb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:review.user_name}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-4 text-sm text-gray-500\",children:formatDate(review.created_at)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-2\",children:[/*#__PURE__*/_jsx(StarRating,{rating:review.rating}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-sm text-gray-500\",children:[review.rating,\"\\uC810\"]})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900 mt-4 mb-2\",children:review.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:review.content})]},review.id))})]})]})});};export default ProductDetail;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","useNavigate","getProduct","createReview","useAuth","useCart","formatCurrency","formatDate","Button","Loading","toast","jsx","_jsx","jsxs","_jsxs","ProductDetail","_product$images$activ","id","navigate","isAuthenticated","addItemToCart","isLoading","isCartLoading","product","setProduct","setIsLoading","error","setError","quantity","setQuantity","activeImageIndex","setActiveImageIndex","isReviewFormOpen","setIsReviewFormOpen","reviewFormData","setReviewFormData","title","content","rating","isSubmittingReview","setIsSubmittingReview","fetchProduct","data","console","handleQuantityChange","e","value","parseInt","target","stock","increaseQuantity","decreaseQuantity","handleAddToCart","warning","success","handleReviewChange","name","handleSubmitReview","preventDefault","updatedProduct","response","detail","className","children","text","onClick","to","StarRating","_ref","map","star","xmlns","viewBox","fill","d","src","images","image","alt","length","index","alt_text","category","category_name","rating_avg","review_count","is_on_sale","price","current_price","dangerouslySetInnerHTML","__html","description","strokeLinecap","strokeLinejoin","strokeWidth","stroke","type","min","max","onChange","variant","size","disabled","onSubmit","htmlFor","required","rows","reviews","review","user_name","created_at"],"sources":["C:/Users/COM-LM/Documents/ShopEase/frontend/src/pages/ProductDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, Link, useNavigate } from 'react-router-dom';\r\nimport { getProduct, createReview } from '../api/products';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useCart } from '../context/CartContext';\r\nimport { formatCurrency, formatDate } from '../utils/formatters';\r\nimport Button from '../components/ui/Button';\r\nimport Loading from '../components/ui/Loading';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst ProductDetail = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { isAuthenticated } = useAuth();\r\n  const { addItemToCart, isLoading: isCartLoading } = useCart();\r\n  \r\n  const [product, setProduct] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [activeImageIndex, setActiveImageIndex] = useState(0);\r\n  const [isReviewFormOpen, setIsReviewFormOpen] = useState(false);\r\n  const [reviewFormData, setReviewFormData] = useState({\r\n    title: '',\r\n    content: '',\r\n    rating: 5\r\n  });\r\n  const [isSubmittingReview, setIsSubmittingReview] = useState(false);\r\n  \r\n  // 상품 데이터 가져오기\r\n  useEffect(() => {\r\n    const fetchProduct = async () => {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      \r\n      try {\r\n        const data = await getProduct(id);\r\n        setProduct(data);\r\n        setActiveImageIndex(0); // 이미지 인덱스 초기화\r\n      } catch (error) {\r\n        console.error('상품 로드 실패:', error);\r\n        setError('상품 정보를 불러오는데 실패했습니다.');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchProduct();\r\n  }, [id]);\r\n  \r\n  // 수량 변경 핸들러\r\n  const handleQuantityChange = (e) => {\r\n    const value = parseInt(e.target.value);\r\n    if (value > 0 && value <= product.stock) {\r\n      setQuantity(value);\r\n    }\r\n  };\r\n  \r\n  // 수량 증가 핸들러\r\n  const increaseQuantity = () => {\r\n    if (quantity < product.stock) {\r\n      setQuantity(quantity + 1);\r\n    }\r\n  };\r\n  \r\n  // 수량 감소 핸들러\r\n  const decreaseQuantity = () => {\r\n    if (quantity > 1) {\r\n      setQuantity(quantity - 1);\r\n    }\r\n  };\r\n  \r\n  // 장바구니에 추가 핸들러\r\n  const handleAddToCart = async () => {\r\n    if (!isAuthenticated) {\r\n      toast.warning('로그인이 필요합니다.');\r\n      navigate('/login');\r\n      return;\r\n    }\r\n    \r\n    const success = await addItemToCart(product.id, quantity);\r\n    if (success) {\r\n      setQuantity(1); // 수량 초기화\r\n    }\r\n  };\r\n  \r\n  // 리뷰 폼 입력 핸들러\r\n  const handleReviewChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setReviewFormData({\r\n      ...reviewFormData,\r\n      [name]: name === 'rating' ? parseInt(value) : value\r\n    });\r\n  };\r\n  \r\n  // 리뷰 작성 핸들러\r\n  const handleSubmitReview = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!isAuthenticated) {\r\n      toast.warning('로그인이 필요합니다.');\r\n      navigate('/login');\r\n      return;\r\n    }\r\n    \r\n    setIsSubmittingReview(true);\r\n    \r\n    try {\r\n      await createReview(product.id, reviewFormData);\r\n      toast.success('리뷰가 등록되었습니다.');\r\n      \r\n      // 리뷰 폼 초기화 및 숨기기\r\n      setReviewFormData({\r\n        title: '',\r\n        content: '',\r\n        rating: 5\r\n      });\r\n      setIsReviewFormOpen(false);\r\n      \r\n      // 상품 정보 새로고침 (리뷰 포함)\r\n      const updatedProduct = await getProduct(id);\r\n      setProduct(updatedProduct);\r\n    } catch (error) {\r\n      console.error('리뷰 작성 실패:', error);\r\n      \r\n      if (error.response && error.response.data) {\r\n        if (error.response.data.detail) {\r\n          toast.error(error.response.data.detail);\r\n        } else {\r\n          toast.error('리뷰 작성에 실패했습니다.');\r\n        }\r\n      } else {\r\n        toast.error('서버 연결에 문제가 있습니다.');\r\n      }\r\n    } finally {\r\n      setIsSubmittingReview(false);\r\n    }\r\n  };\r\n  \r\n  // 로딩 중\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:px-8\">\r\n        <Loading text=\"상품 정보를 불러오는 중입니다...\" />\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  // 에러 발생 시\r\n  if (error) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:px-8\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">오류가 발생했습니다</h2>\r\n          <p className=\"text-gray-600 mb-6\">{error}</p>\r\n          <Button onClick={() => navigate(-1)}>이전 페이지로 돌아가기</Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  // 상품이 없는 경우\r\n  if (!product) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:px-8\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">상품을 찾을 수 없습니다</h2>\r\n          <p className=\"text-gray-600 mb-6\">요청하신 상품 정보가 존재하지 않습니다.</p>\r\n          <Link to=\"/products\">\r\n            <Button>상품 목록으로 돌아가기</Button>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  // 리뷰 별점 표시 컴포넌트\r\n  const StarRating = ({ rating }) => {\r\n    return (\r\n      <div className=\"flex\">\r\n        {[1, 2, 3, 4, 5].map((star) => (\r\n          <svg\r\n            key={star}\r\n            className={`h-5 w-5 ${\r\n              star <= rating ? 'text-yellow-500' : 'text-gray-300'\r\n            }`}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            viewBox=\"0 0 20 20\"\r\n            fill=\"currentColor\"\r\n          >\r\n            <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\r\n          </svg>\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n  \r\n  return (\r\n    <div className=\"bg-white\">\r\n      <div className=\"max-w-7xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:px-8\">\r\n        {/* 상품 정보 */}\r\n        <div className=\"lg:grid lg:grid-cols-2 lg:gap-x-8\">\r\n          {/* 상품 이미지 */}\r\n          <div className=\"lg:max-w-lg lg:self-start\">\r\n            <div className=\"aspect-w-1 aspect-h-1 rounded-lg overflow-hidden\">\r\n              <img\r\n                src={product.images[activeImageIndex]?.image || '/assets/placeholder-product.jpg'}\r\n                alt={product.name}\r\n                className=\"w-full h-full object-center object-cover\"\r\n              />\r\n            </div>\r\n            \r\n            {/* 이미지 썸네일 */}\r\n            {product.images.length > 1 && (\r\n              <div className=\"mt-4 grid grid-cols-6 gap-2\">\r\n                {product.images.map((image, index) => (\r\n                  <button\r\n                    key={image.id}\r\n                    onClick={() => setActiveImageIndex(index)}\r\n                    className={`relative rounded-md overflow-hidden ${\r\n                      activeImageIndex === index ? 'ring-2 ring-indigo-500' : 'ring-1 ring-gray-200'\r\n                    }`}\r\n                  >\r\n                    <img\r\n                      src={image.image}\r\n                      alt={image.alt_text || `${product.name} 이미지 ${index + 1}`}\r\n                      className=\"w-full h-full object-center object-cover\"\r\n                    />\r\n                    <span\r\n                      className={`absolute inset-0 ${\r\n                        activeImageIndex === index ? 'ring-2 ring-inset ring-indigo-500' : ''\r\n                      }`}\r\n                      aria-hidden=\"true\"\r\n                    />\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          {/* 상품 정보 */}\r\n          <div className=\"mt-10 lg:mt-0\">\r\n            {/* 카테고리 */}\r\n            <div className=\"mb-4\">\r\n              <Link to={`/categories/${product.category}`} className=\"text-sm text-indigo-600 hover:text-indigo-500\">\r\n                {product.category_name}\r\n              </Link>\r\n            </div>\r\n            \r\n            {/* 상품명 */}\r\n            <h1 className=\"text-3xl font-extrabold tracking-tight text-gray-900\">{product.name}</h1>\r\n            \r\n            {/* 상품 평점 */}\r\n            <div className=\"mt-3\">\r\n              <div className=\"flex items-center\">\r\n                <StarRating rating={product.rating_avg} />\r\n                <span className=\"ml-2 text-sm text-gray-500\">\r\n                  {product.rating_avg}/5 ({product.review_count}개 리뷰)\r\n                </span>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* 상품 가격 */}\r\n            <div className=\"mt-6\">\r\n              {product.is_on_sale ? (\r\n                <div className=\"flex items-end\">\r\n                  <p className=\"text-xl line-through text-gray-400\">\r\n                    {formatCurrency(product.price)}\r\n                  </p>\r\n                  <p className=\"text-3xl text-red-600 font-bold ml-3\">\r\n                    {formatCurrency(product.current_price)}\r\n                  </p>\r\n                </div>\r\n              ) : (\r\n                <p className=\"text-3xl text-gray-900 font-bold\">\r\n                  {formatCurrency(product.price)}\r\n                </p>\r\n              )}\r\n            </div>\r\n            \r\n            {/* 상품 재고 */}\r\n            <div className=\"mt-4\">\r\n              <p className=\"text-sm text-gray-500\">\r\n                {product.stock > 0 ? `재고: ${product.stock}개` : '품절'}\r\n              </p>\r\n            </div>\r\n            \r\n            {/* 상품 설명 */}\r\n            <div className=\"mt-6\">\r\n              <h2 className=\"text-lg font-medium text-gray-900\">상품 설명</h2>\r\n              <div\r\n                className=\"mt-3 prose prose-sm text-gray-500\"\r\n                dangerouslySetInnerHTML={{ __html: product.description }}\r\n              />\r\n            </div>\r\n            \r\n            {/* 수량 선택 및 장바구니 추가 */}\r\n            {product.stock > 0 ? (\r\n              <div className=\"mt-8\">\r\n                <div className=\"flex items-center mb-4\">\r\n                  <span className=\"mr-3 text-gray-700\">수량</span>\r\n                  <div className=\"flex items-center\">\r\n                    <button\r\n                      onClick={decreaseQuantity}\r\n                      className=\"text-gray-500 focus:outline-none focus:text-gray-600\"\r\n                    >\r\n                      <svg className=\"h-5 w-5\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path d=\"M20 12H4\"></path>\r\n                      </svg>\r\n                    </button>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"1\"\r\n                      max={product.stock}\r\n                      value={quantity}\r\n                      onChange={handleQuantityChange}\r\n                      className=\"mx-2 border text-center w-16 rounded-md\"\r\n                    />\r\n                    <button\r\n                      onClick={increaseQuantity}\r\n                      className=\"text-gray-500 focus:outline-none focus:text-gray-600\"\r\n                    >\r\n                      <svg className=\"h-5 w-5\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path d=\"M12 4v16m8-8H4\"></path>\r\n                      </svg>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                \r\n                <Button\r\n                  onClick={handleAddToCart}\r\n                  variant=\"primary\"\r\n                  size=\"large\"\r\n                  isLoading={isCartLoading}\r\n                  className=\"w-full\"\r\n                >\r\n                  장바구니에 담기\r\n                </Button>\r\n              </div>\r\n            ) : (\r\n              <div className=\"mt-8\">\r\n                <Button\r\n                  variant=\"secondary\"\r\n                  size=\"large\"\r\n                  disabled\r\n                  className=\"w-full\"\r\n                >\r\n                  품절\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n        \r\n        {/* 상품 리뷰 */}\r\n        <div className=\"mt-16 pt-10 border-t border-gray-200\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900\">리뷰</h2>\r\n          \r\n          {/* 리뷰 작성 버튼 */}\r\n          <div className=\"mt-6 flex justify-between items-center\">\r\n            <div className=\"flex items-center\">\r\n              <StarRating rating={product.rating_avg} />\r\n              <span className=\"ml-2 text-gray-600\">\r\n                {product.review_count}개의 리뷰\r\n              </span>\r\n            </div>\r\n            \r\n            <Button\r\n              onClick={() => {\r\n                if (isAuthenticated) {\r\n                  setIsReviewFormOpen(!isReviewFormOpen);\r\n                } else {\r\n                  toast.warning('로그인이 필요합니다.');\r\n                  navigate('/login');\r\n                }\r\n              }}\r\n              variant={isReviewFormOpen ? 'secondary' : 'primary'}\r\n            >\r\n              {isReviewFormOpen ? '취소' : '리뷰 작성'}\r\n            </Button>\r\n          </div>\r\n          \r\n          {/* 리뷰 작성 폼 */}\r\n          {isReviewFormOpen && (\r\n            <div className=\"mt-6 bg-gray-50 p-6 rounded-lg\">\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">리뷰 작성</h3>\r\n              <form onSubmit={handleSubmitReview}>\r\n                {/* 별점 선택 */}\r\n                <div className=\"mb-4\">\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">평점</label>\r\n                  <div className=\"flex items-center\">\r\n                    {[1, 2, 3, 4, 5].map((rating) => (\r\n                      <button\r\n                        key={rating}\r\n                        type=\"button\"\r\n                        onClick={() => setReviewFormData({ ...reviewFormData, rating })}\r\n                        className=\"p-1 focus:outline-none\"\r\n                      >\r\n                        <svg\r\n                          className={`h-8 w-8 ${\r\n                            rating <= reviewFormData.rating ? 'text-yellow-500' : 'text-gray-300'\r\n                          }`}\r\n                          xmlns=\"http://www.w3.org/2000/svg\"\r\n                          viewBox=\"0 0 20 20\"\r\n                          fill=\"currentColor\"\r\n                        >\r\n                          <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\r\n                        </svg>\r\n                      </button>\r\n                    ))}\r\n                    <span className=\"ml-2 text-sm text-gray-500\">\r\n                      {reviewFormData.rating}점\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                \r\n                {/* 리뷰 제목 */}\r\n                <div className=\"mb-4\">\r\n                  <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 mb-2\">제목</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"title\"\r\n                    name=\"title\"\r\n                    value={reviewFormData.title}\r\n                    onChange={handleReviewChange}\r\n                    required\r\n                    className=\"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md\"\r\n                  />\r\n                </div>\r\n                \r\n                {/* 리뷰 내용 */}\r\n                <div className=\"mb-4\">\r\n                  <label htmlFor=\"content\" className=\"block text-sm font-medium text-gray-700 mb-2\">내용</label>\r\n                  <textarea\r\n                    id=\"content\"\r\n                    name=\"content\"\r\n                    value={reviewFormData.content}\r\n                    onChange={handleReviewChange}\r\n                    required\r\n                    rows={4}\r\n                    className=\"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md\"\r\n                  />\r\n                </div>\r\n                \r\n                {/* 제출 버튼 */}\r\n                <div className=\"flex justify-end\">\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"primary\"\r\n                    isLoading={isSubmittingReview}\r\n                  >\r\n                    리뷰 등록\r\n                  </Button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          )}\r\n          \r\n          {/* 리뷰 목록 */}\r\n          <div className=\"mt-8 space-y-8\">\r\n            {product.reviews.length === 0 ? (\r\n              <p className=\"text-gray-500 text-center py-8\">아직 리뷰가 없습니다. 첫 리뷰를 작성해보세요!</p>\r\n            ) : (\r\n              product.reviews.map((review) => (\r\n                <div key={review.id} className=\"border-b border-gray-200 pb-8\">\r\n                  <div className=\"flex items-center mb-2\">\r\n                    <span className=\"font-medium text-gray-900\">{review.user_name}</span>\r\n                    <span className=\"ml-4 text-sm text-gray-500\">{formatDate(review.created_at)}</span>\r\n                  </div>\r\n                  <div className=\"flex items-center mb-2\">\r\n                    <StarRating rating={review.rating} />\r\n                    <span className=\"ml-2 text-sm text-gray-500\">{review.rating}점</span>\r\n                  </div>\r\n                  <h4 className=\"text-lg font-medium text-gray-900 mt-4 mb-2\">{review.title}</h4>\r\n                  <p className=\"text-gray-600\">{review.content}</p>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductDetail;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}